# CMake script for PyOSSIM
# Author: Vipul Raheja

CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

# Find SWIG
FIND_PACKAGE(SWIG REQUIRED)
IF(NOT SWIG_FOUND)
   MESSAGE(SEND_ERROR "SWIG Libraries not found, you need them in order to build PyOSSIM")
ENDIF(NOT SWIG_FOUND)

# Include SWIG
INCLUDE(${SWIG_USE_FILE})

# Find Python Libraries
FIND_PACKAGE(PythonLibs REQUIRED)
IF(NOT PYTHONLIBS_FOUND)
   MESSAGE(SEND_ERROR "Python Libraries not found, you need them in order to build PyOSSIM")
ENDIF(NOT PYTHONLIBS_FOUND)

# Include Python
INCLUDE_DIRECTORIES(${PYTHON_INCLUDE_PATH})

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/../../ossim/include ${PYTHON_INCLUDE_DIRS})

SET(CMAKE_SWIG_FLAGS "-c++")

SET(MODULE_NAME pyossim)
SET(INTERFACE_FILE ${CMAKE_CURRENT_SOURCE_DIR}/../swig/master.i)
SET(SRC_FILES ${CMAKE_CURRENT_SOURCE_DIR}/../swig/src/*)

SET_SOURCE_FILES_PROPERTIES(${INTERFACE_FILE} PROPERTIES CPLUSPLUS ON)
SET_SOURCE_FILES_PROPERTIES(${INTERFACE_FILE} PROPERTIES CMAKE_SWIG_FLAGS "-includeall")

TARGET_LINK_LIBRARIES(ossim)

SWIG_ADD_MODULE(${MODULE_NAME} python ${INTERFACE_FILE})
SWIG_LINK_LIBRARIES(${MODULE_NAME} ossim ${PYTHON_LIBRARIES})
